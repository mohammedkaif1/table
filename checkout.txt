import React, { useState } from 'react';
import {
  Table, TableBody, TableCell, TableContainer, TableHead, TableRow,
  Paper, Checkbox, Dialog, DialogActions, DialogContent, DialogTitle,
  Button, Typography
} from '@mui/material';
import { styled } from '@mui/system';

const StyledTableRow = styled(TableRow)(({ theme }) => ({
  '&:nth-of-type(odd)': {
    //backgroundColor: theme.palette.action.hover,
  },
  '&:hover': {
    //backgroundColor: theme.palette.action.selected,
  },
  height: '60px',
}));

const StyledButton = styled(Button)({
  backgroundColor: '#6f4c8e',
  color: '#ffffff',
  '&:hover': {
    backgroundColor: '#5a3b70',
  },
});



const Checkout = ({data,open,close}) => {
  //const [open, setOpen] = useState(true);
  const [selected, setSelected] = useState(
    data.reduce((acc, emp) => ({ ...acc, [emp.id]: true }), {})
  );
  const handleCheckboxChange1 = (id) => {
    setSelected((prev) => ({ ...prev, [id]: !prev[id] }));
  };
  const handleSave = () => {
    const selectedEmployees = data.filter(emp => selected[emp.id]);
    const result = selectedEmployees.map(emp => ({
      empId: emp.id,
      status: emp.status,
    }));
    console.log(result);
    close();
  };
  

  return (
    <Dialog open={open}  maxWidth="md" fullWidth>
      <DialogTitle>Checkout for Hiring Employees</DialogTitle>
      <DialogContent>
        <TableContainer component={Paper}>
          <Table>
            <TableHead>
              <TableRow>
                <TableCell>Emp ID</TableCell>
                <TableCell>Emp Name</TableCell>
                <TableCell>SDM</TableCell>
                <TableCell>Project Duration</TableCell>
                <TableCell>Skills</TableCell>
                <TableCell>Experience</TableCell>
                <TableCell>Location</TableCell>
                <TableCell>Status</TableCell>
                <TableCell>Category</TableCell>
                <TableCell>Remove</TableCell>
              </TableRow>
            </TableHead>
            <TableBody>
              {data.map((emp) => (
                <StyledTableRow key={emp.employeeId}>
                  <TableCell>{emp.employeeId}</TableCell>
                  <TableCell>{emp.employeeName}</TableCell>
                  <TableCell>{emp.sdm}</TableCell>
                  <TableCell>{emp.duration}</TableCell>
                  <TableCell>{emp.skills}</TableCell>
                  <TableCell>{emp.experince}</TableCell>
                  <TableCell>{emp.location}</TableCell>
                  <TableCell>{emp.contingencyStatus}</TableCell>
                  <TableCell>{emp.category}</TableCell>
                  <TableCell>
                    <Checkbox
                      checked={selected[emp.id]}
                      onChange={() => handleCheckboxChange1(emp.id)}
                    />
                  </TableCell>
                </StyledTableRow>
              ))}
            </TableBody>
          </Table>
        </TableContainer>
        <Typography variant="body2" style={{ marginTop: '16px' }}>
          You have selected {Object.values(selected).filter(v => v).length} employees.
        </Typography>
      </DialogContent>
      <DialogActions>
        <Button onClick={close} color="primary">
          Cancel
        </Button>
        <StyledButton onClick={handleSave}>
          Save
        </StyledButton>
      </DialogActions>
    </Dialog>
  );
};

export default Checkout;
